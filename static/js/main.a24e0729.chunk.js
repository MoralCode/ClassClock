(this.webpackJsonpclassclock=this.webpackJsonpclassclock||[]).push([[0],{104:function(e,t,n){},224:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(30),i=n.n(o);n(104),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(12),s=n(5),l=n(92),u=n(25),d=n(94),h=n.n(d),m=n(95),f=n.n(m),p="RECEIVE_SCHOOL",g="FETCH_ERROR",v="SELECT_SCHOOL",b="INVALIDATE_SCHOOL";function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,data:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object.assign({},e,{isFetching:!0});case p:return Object.assign({},e,{isFetching:!1,data:t.school,lastUpdated:t.receivedAt});case b:return Object.assign({},e,{isFetching:!1,data:{}});default:return e}}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===g?t.message:e}var E,S,j=n(19),k=n(7),w=n(8),T=function(){function e(t,n,a){Object(k.a)(this,e),this.hours=void 0,this.minutes=void 0,this.seconds=void 0,this.hours=Math.abs(t%24),this.minutes=Math.abs(n%60),this.seconds=Math.abs(a||0)}return Object(w.a)(e,null,[{key:"fromMilliseconds",value:function(t){var n=Math.floor(t/1e3/60/60);t-=1e3*n*60*60;var a=Math.floor(t/1e3/60);t-=1e3*a*60;var r=Math.floor(t/1e3);return t-=1e3*r,new e(n,a,r)}},{key:"fromDate",value:function(t){return new e(t.getHours(),t.getMinutes(),t.getSeconds())}},{key:"fromString",value:function(t){var n=t.split(":");return n.length<2||n.length,new e(parseInt(n[0],10),parseInt(n[1],10),3===n.length?parseInt(n[2],10):void 0)}}]),Object(w.a)(e,[{key:"getHours",value:function(){return this.hours}},{key:"getMinutes",value:function(){return this.minutes}},{key:"getSeconds",value:function(){return this.seconds}},{key:"getMillisecondsTo",value:function(e){return 60*(e.getHours()-this.hours)*60*1e3+60*(e.getMinutes()-this.minutes)*1e3+1e3*(e.getSeconds()-this.seconds)}},{key:"getTimeDeltaTo",value:function(t){return e.fromMilliseconds(Math.abs(this.getMillisecondsTo(t)))}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(t?this.hours:this.hours,this.hours.toString().padStart(2,"0")+":"+this.minutes.toString().padStart(2,"0"));return e||(n+=":"+this.seconds.toString().padStart(2,"0")),n}},{key:"isAM",value:function(){return this.hours<12&&this.minutes<60&&this.seconds<60}},{key:"getFormattedString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.isAM()?" AM":" PM";return this.toString(e)+(t?n:"")}},{key:"toJSON",value:function(){return this.toString()}}]),e}();function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e,t){var n=!0,a=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;if(t.hasOwnProperty(c))return t[c]}}catch(s){a=!0,r=s}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}}function C(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:e.type,id:e.id},void 0!==e.links&&{endpoint:e.links.self});return Object.assign({},t,e.attributes)}function I(){return new Date}function _(e){return e.sort((function(e,t){return-e.getStartTime().getMillisecondsTo(t.getStartTime())}))}function x(e,t,n){t.getMillisecondsTo(n);var a=e.getMillisecondsTo(t),r=e.getMillisecondsTo(n);return a>0&&r>0?S.IS_BEFORE:r<0&&r<0?S.IS_AFTER:S.IS_DURING_OR_EXACTLY}!function(e){e.DAY_OFF="day off",e.OUTSIDE_SCHOOL_HOURS="outside school hours",e.SCHOOL_IN_CLASS_OUT="school is in session, but class is not",e.CLASS_IN_SESSION="class is in session"}(E||(E={})),function(e){e[e.IS_BEFORE=-1]="IS_BEFORE",e[e.IS_DURING_OR_EXACTLY=0]="IS_DURING_OR_EXACTLY",e[e.IS_AFTER=1]="IS_AFTER"}(S||(S={}));var M=function(){function e(t,n,a,r){Object(k.a)(this,e),this.name=void 0,this.startTime=void 0,this.endTime=void 0,this.creationDate=void 0,this.name=t,this.startTime=n,this.endTime=a,this.creationDate=r}return Object(w.a)(e,null,[{key:"fromJson",value:function(t){var n=N(["startTime","start_time"],t),a=N(["endTime","end_time"],t);return new e(N(["name","classPeriodName","class_period_name"],t),n instanceof T?n:T.fromString(n),a instanceof T?a:T.fromString(a),new Date(N(["creationDate","creation_date"],t)))}}]),Object(w.a)(e,[{key:"getName",value:function(){return this.name}},{key:"getStartTime",value:function(){return this.startTime}},{key:"getEndTime",value:function(){return this.endTime}},{key:"getDuration",value:function(){return this.startTime.getTimeDeltaTo(this.endTime)}},{key:"stateForTime",value:function(e){return x(e,this.startTime,this.endTime)}}]),e}(),R=n(4),F=n.n(R),P=function(){function e(t,n,a,r,o,i,c){Object(k.a)(this,e),this.id=void 0,this.name=void 0,this.endpoint=void 0,this.displayName=void 0,this.dates=void 0,this.classes=void 0,this.lastUpdatedDate=void 0,this.id=t,this.name=n,this.endpoint=a,this.displayName=c,this.dates=r,this.classes=o,this.lastUpdatedDate=i}return Object(w.a)(e,null,[{key:"fromJson",value:function(t){return new e(N(["id","identifier"],t),N(["name","full_name","fullName"],t),N(["endpoint"],t),N(["dates"],t).map((function(e){return Object(R.parse)(e)})),N(["classes","meeting_times"],t).map((function(e){return M.fromJson(e)})),N(["lastModified","last_modified"],t))}}]),Object(w.a)(e,[{key:"getIdentifier",value:function(){return this.id}},{key:"getName",value:function(){return this.displayName?this.displayName:this.name}},{key:"getEndpoint",value:function(){return this.endpoint}},{key:"getDates",value:function(){return this.dates}},{key:"getAllClasses",value:function(){return this.classes}},{key:"numberOfClasses",value:function(){return this.classes.length-1}},{key:"lastUpdated",value:function(){return this.lastUpdatedDate}},{key:"hasChangedSince",value:function(e){return e.getTime()-this.lastUpdatedDate.getTime()>0}},{key:"getClassPeriodForTime",value:function(e){var t=!0,n=!1,a=void 0;try{for(var r,o=_(this.classes)[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value;if(i.stateForTime(e)===S.IS_DURING_OR_EXACTLY)return i}}catch(c){n=!0,a=c}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}}}]),e}(),A=function(){function e(t,n,a,r,o,i,c,s,l,u){Object(k.a)(this,e),this.id=void 0,this.ownerId=void 0,this.endpoint=void 0,this.fullName=void 0,this.acronym=void 0,this.timeZone=void 0,this.schedules=void 0,this.passingPeriodName=void 0,this.creationDate=void 0,this.lastUpdatedDate=void 0,this.id=t,this.ownerId=n,this.endpoint=o,this.fullName=a,this.acronym=r,this.timeZone=i,this.schedules=c,this.passingPeriodName=s,this.creationDate=l,this.lastUpdatedDate=u}return Object(w.a)(e,null,[{key:"fromJson",value:function(t){var n=N(["schedules"],t);return new e(N(["id","identifier"],t),N(["ownerId","owner_id"],t),N(["name","fullName","full_name"],t),N(["acronym"],t),N(["endpoint"],t),"LA",n?n.map((function(e){return P.fromJson(e)})):void 0,N(["alternate_freeperiod_name","passingPeriodName"],t),N(["creation_date","creationDate"],t),N(["last_modified","lastModified"],t))}}]),Object(w.a)(e,[{key:"getIdentifier",value:function(){return this.id}},{key:"getOwnerIdentifier",value:function(){return this.ownerId}},{key:"getEndpoint",value:function(){return this.endpoint}},{key:"getSchedules",value:function(){return this.schedules}},{key:"getName",value:function(){return this.fullName}},{key:"getAcronym",value:function(){return this.acronym}},{key:"getPassingTimeName",value:function(){return this.passingPeriodName}},{key:"getTimezone",value:function(){return this.timeZone}},{key:"getCreationDate",value:function(){return this.creationDate}},{key:"lastUpdated",value:function(){return this.lastUpdated}},{key:"hasChangedSince",value:function(e){return void 0!==this.lastUpdatedDate?e.getTime()-this.lastUpdatedDate.getTime()>0:void 0}},{key:"getScheduleForDate",value:function(e){if(this.schedules){var t=!0,n=!1,a=void 0;try{for(var r,o=this.schedules[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value;if(i.getDates().map((function(e){return e.toDateString()})).includes(e.toDateString()))return i}}catch(c){n=!0,a=c}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}return null}}},{key:"hasSchedules",value:function(){return void 0!==this.schedules}},{key:"isInSession",value:function(e){var t=T.fromDate(e),n=this.getScheduleForDate(e);return!!n&&x(t,n.getAllClasses()[0].getStartTime(),n.getAllClasses()[n.numberOfClasses()].getEndTime())===S.IS_DURING_OR_EXACTLY}}]),e}();function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=Object(u.a)((function(e,t){return L({},e,{selectedSchool:JSON.stringify(e.selectedSchool)})}),(function(e,t){return L({},e,{selectedSchool:A.fromJson(e.selectedSchool)})}),{whitelist:["selectedSchoolReducer"]}),Y="SET_TIME_FORMAT";function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{use24HourTime:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object.assign({},e,{use24HourTime:t.use24HourTime});default:return e}}var W={key:"root",storage:h.a,transforms:[H],blacklist:["router","error"]},B=n(96),G=n(11),z=n(97),X=n(3),Z=n.n(X),K=n(9),V=n(6),q=n(33),$=n(98),Q=n.n($),ee=function(){return window.history.replaceState({},document.title,window.location.pathname)},te=r.a.createContext(null),ne=function(){return Object(a.useContext)(te)},ae=function(e){var t=e.children,n=e.onRedirectCallback,o=void 0===n?ee:n,i=Object(q.a)(e,["children","onRedirectCallback"]),c=Object(a.useState)(!1),s=Object(V.a)(c,2),l=s[0],u=s[1],d=Object(a.useState)(),h=Object(V.a)(d,2),m=h[0],f=h[1],p=Object(a.useState)(),g=Object(V.a)(p,2),v=g[0],b=g[1],O=Object(a.useState)(!0),y=Object(V.a)(O,2),E=y[0],S=y[1],j=Object(a.useState)(!1),k=Object(V.a)(j,2),w=k[0],T=k[1];Object(a.useEffect)((function(){(function(){var e=Object(K.a)(Z.a.mark((function e(){var t,n,a,r,c;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q()(i);case 2:if(t=e.sent,b(t),!window.location.search.includes("code=")){e.next=10;break}return e.next=7,t.handleRedirectCallback();case 7:n=e.sent,a=n.appState,o(a);case 10:return e.next=12,t.isAuthenticated();case 12:if(r=e.sent,u(r),!r){e.next=19;break}return e.next=17,t.getUser();case 17:c=e.sent,f(c);case 19:S(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var D=function(){var e=Object(K.a)(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),e.prev=1,e.next=4,v.loginWithPopup(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:return e.prev=9,T(!1),e.finish(9);case 12:return e.next=14,v.getUser();case 14:n=e.sent,f(n),u(!0);case 17:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(K.a)(Z.a.mark((function e(){var t,n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.next=3,v.handleRedirectCallback();case 3:return t=e.sent,e.next=6,v.getUser();case 6:return n=e.sent,S(!1),u(!0),f(n),e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(te.Provider,{value:{isAuthenticated:l,user:m,loading:E,popupOpen:w,loginWithPopup:D,handleRedirectCallback:N,getIdTokenClaims:function(e){return v.getIdTokenClaims(e)},loginWithRedirect:function(e){return v.loginWithRedirect(e)},getTokenSilently:function(e){return v.getTokenSilently(e)},getTokenWithPopup:function(e){return v.getTokenWithPopup(e)},logout:function(e){return v.logout(e)}}},t)},re=function e(){Object(k.a)(this,e)};re.domain="classclock.auth0.com",re.clientId="Z5H5pk78OhW6naNZHnK6CI6EEKZoVipr",re.audience="https://api.classclock.app";var oe={main:"/",fullSchedule:"/schedule.html",settings:"/settings.html",selectSchool:"/select",loginCallback:"/callback",admin:"/admin"},ie="https://github.com/MoralCode/ClassClock",ce="https://twitter.com/classclockapp",se="https://www.instagram.com/classclockapp/",le=(n(24),n(32)),ue=n(31),de=n(34),he=function(e){function t(){return Object(k.a)(this,t),Object(le.a)(this,Object(ue.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement("a",{className:this.props.className,id:this.props.id,style:Object.assign({},this.props.style,{cursor:"pointer"}),title:this.props.title,href:"function"===typeof this.props.destination?void 0:this.props.destination,onClick:"function"===typeof this.props.destination?this.props.destination:void 0},this.props.children)}}]),t}(a.Component),me=(n(224),function(e){function t(){return Object(k.a)(this,t),Object(le.a)(this,Object(ue.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"infoBlock"+(this.props.className?" "+this.props.className:""),style:this.props.style},this.props.children)}}]),t}(a.Component)),fe=n(10),pe=n(13),ge=Object(G.b)((function(e){var t=e.selectedSchool;return t.data=A.fromJson(t.data),{selectedSchool:t}}))((function(e){var t=Object(a.useState)(I()),n=Object(V.a)(t,2),o=n[0],i=n[1],c=function(t){e.dispatch(Object(s.b)(t))};Object(a.useEffect)((function(){var e=setInterval((function(){i(I())}),500);return function(){return clearInterval(e)}}),[o]);var l=e.selectedSchool.data.getScheduleForDate(o),u=r.a.createElement(r.a.Fragment,null);switch(l){case void 0:e.selectedSchool.isFetching||e.dispatch(Object(s.b)(oe.selectSchool));break;case null:u=r.a.createElement("p",null,"No School Today");break;default:var d=function(e,t){var n=t.getScheduleForDate(e);if(n)for(var a=_(n.getAllClasses()),r=0;r<a.length;r++)for(var o=0,i=[a[r].getStartTime(),a[r].getEndTime()];o<i.length;o++){var c=i[o];if(T.fromDate(e).getMillisecondsTo(c)>=0)return[a[r].stateForTime(T.fromDate(e))===S.IS_DURING_OR_EXACTLY?a[r+1]:a[r],c]}}(o,e.selectedSchool.data),h=d||[void 0,void 0],m=Object(V.a)(h,2),f=m[0],p=m[1],g=l.getClassPeriodForTime(T.fromDate(o));u=r.a.createElement(r.a.Fragment,null,r.a.createElement(me,null,r.a.createElement("p",null,"Today is a"," ",r.a.createElement(he,{destination:function(){return c(oe.fullSchedule)},id:"viewScheduleLink"},l.getName()))),r.a.createElement(me,null,r.a.createElement("p",null,"You are currently in: "),r.a.createElement("p",{className:"timeFont",style:{fontSize:"30px"}},r.a.createElement("b",null,void 0!==g?g.getName():e.selectedSchool.data.getPassingTimeName()))),r.a.createElement(me,null,r.a.createElement("p",null,"...which ends in:"),r.a.createElement("p",{className:"timeFont",style:{fontSize:"60px"}},r.a.createElement("b",null,p?T.fromDate(o).getTimeDeltaTo(p).getFormattedString():"No Class")),r.a.createElement("p",null,"Your next class period is: "),r.a.createElement("p",{className:"timeFont",style:{fontSize:"30px"}},r.a.createElement("b",null,f?f.getName():"No Class"))))}return r.a.createElement("div",{className:"App"},r.a.createElement(he,{className:"cornerNavButton smallIcon",destination:function(){return c(oe.settings)}},r.a.createElement(fe.a,{icon:pe.c})),r.a.createElement("br",null),r.a.createElement(me,null,r.a.createElement("p",null,"It is currently: "),r.a.createElement("p",{className:"timeFont",style:{fontSize:"40px"}},T.fromDate(o).getFormattedString()),r.a.createElement("p",null,"on"," ",r.a.createElement("b",null,o.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"short",day:"numeric"})))),u)})),ve=Object(G.b)((function(e){var t=e.selectedSchool;return t.data=A.fromJson(t.data),{selectedSchool:t}}))((function(e){var t=r.a.createElement(r.a.Fragment,null),n=e.selectedSchool.data.getScheduleForDate(I());switch(n){case void 0:e.dispatch(Object(s.b)(oe.selectSchool));break;case null:t=r.a.createElement("p",null,"No School Today");break;default:t=r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,n.getName()),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Class")),r.a.createElement("td",null,r.a.createElement("b",null,"Time")))),r.a.createElement("tbody",null,_(n.getAllClasses()).map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,e.getName()),r.a.createElement("td",null,e.getStartTime().toString()," -"," ",e.getEndTime().toString())))})))))}return r.a.createElement("div",null,r.a.createElement(he,{className:"cornerNavButton smallIcon",destination:function(){return e.dispatch(Object(s.b)(oe.main))}},r.a.createElement(fe.a,{icon:pe.d})),r.a.createElement("br",null),r.a.createElement("p",{style:{fontSize:"30px"}},r.a.createElement("b",null,e.selectedSchool.data.getName())),t)}));var be=n(35),Oe=n(48),ye=n.n(Oe);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Se=function e(){Object(k.a)(this,e)};function je(e){return function(){var t=Object(K.a)(Z.a.mark((function t(n){var a,r,o;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:v}),a=function(e){var t;console.log("Caught an error: ",e.message),n((t=e.message,{type:g,message:t}))},r=Se.validateResponse(Se.getSchool(e),a),o=Se.validateResponse(Se.getSchedulesListForSchool(e),a),Promise.all([r,o]).then((function(t){var r=Object(V.a)(t,2),o=r[0],i=r[1],c=[],s=!0,l=!1,u=void 0;try{for(var d,h=i.data[Symbol.iterator]();!(s=(d=h.next()).done);s=!0){var m=d.value.id,f=Se.validateResponse(Se.getDetailedScheduleForSchool(e,m),a);c.push(f)}}catch(g){l=!0,u=g}finally{try{s||null==h.return||h.return()}finally{if(l)throw u}}Promise.all(c).then((function(e){var t;o.data.attributes.schedules=e.map((function(e){return C(e.data)})),n((t=C(o.data),{type:p,school:A.fromJson(t),receivedAt:Date.now()}))}),(function(e){return a(e)}))}),(function(e){return a(e)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}Se.baseURL="https://api.classclock.app/v0",Se.getSchoolsList=function(){var e=Object(K.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Se.baseURL+"/schools/",Se.getHeaders("GET",t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se.getSchool=function(){var e=Object(K.a)(Z.a.mark((function e(t,n){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Se.baseURL+"/school/"+t+"/",Se.getHeaders("GET",n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Se.getSchedulesListForSchool=function(){var e=Object(K.a)(Z.a.mark((function e(t,n){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Se.baseURL+"/school/"+t+"/bellschedules/",Se.getHeaders("GET",n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Se.getDetailedScheduleForSchool=function(){var e=Object(K.a)(Z.a.mark((function e(t,n,a){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Se.baseURL+"/school/"+t+"/bellschedule/"+n+"/",Se.getHeaders("GET",a));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Se.validateResponse=function(){var e=Object(K.a)(Z.a.mark((function e(t,n){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.then((function(e){if(e.ok)return e.json()}),(function(e){console.log(n),n?n(e):console.log("An error occurred: ",e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Se.getHeaders=function(e,t,n){var a=t?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,{Authorization:"Bearer "+t}):n;return Object.assign({},{method:e,headers:new Headers({Accept:"application/vnd.api+json"})},a)};var ke=Object(G.b)((function(e){var t=e.selectedSchool,n=e.userSettings;return{selectedSchool:Object.assign({},t,{data:A.fromJson(t.data)}),userSettings:n}}))((function(e){var t=ne(),n=t.logout,a=t.user,o=(t.getTokenSilently,function(t){e.dispatch(Object(s.b)(t))});return e.selectedSchool.data!=={}||e.selectedSchool.isFetching||o(oe.selectSchool),r.a.createElement("div",null,r.a.createElement(he,{className:"cornerNavButton smallIcon",destination:function(){return o(oe.main)}},r.a.createElement(fe.a,{icon:pe.d})),r.a.createElement("br",null),r.a.createElement("h1",null,"Settings"),a?r.a.createElement("span",null,"Hello ",r.a.createElement("b",null,a.name||a.email)," (",r.a.createElement(he,{destination:function(){n(),e.dispatch({type:b})},title:"Log Out"},r.a.createElement(fe.a,{icon:pe.e})," Log Out"),")"):void 0,r.a.createElement("p",null,e.selectedSchool.isFetching?r.a.createElement("span",null,"Loading School..."):r.a.createElement("b",null,e.selectedSchool.data.getName()+" "),r.a.createElement("br",null),r.a.createElement("em",{className:"smallerText"},"(",r.a.createElement(he,{destination:function(){return o(oe.selectSchool)},title:"Change School"},"Change School"),")"),a&&e.selectedSchool.data.getOwnerIdentifier()===a.sub?r.a.createElement("em",{className:"smallerText"},"(",r.a.createElement(he,{destination:function(){return o(oe.admin)},title:"Manage School"},"Manage School"),")"):void 0,r.a.createElement("br",null),r.a.createElement("em",{className:"smallerText"},"Updated:"," ",ye()(new Date(e.selectedSchool.lastUpdated),"MMM D YYYY h:mm:ss a")+" "),e.selectedSchool.isFetching?void 0:r.a.createElement("em",{className:"smallerText"},"(",r.a.createElement(he,{destination:function(){return e.dispatch(je(e.selectedSchool.data.getIdentifier()))},title:"Reload Schedule"},"Refresh"),")")),r.a.createElement("label",null,r.a.createElement("b",null,"Use 24-hour Time?")," ",r.a.createElement("input",{type:"checkbox",checked:e.userSettings.use24HourTime,onChange:function(){var t;e.dispatch((t=!e.userSettings.use24HourTime,{type:Y,use24HourTime:t}))}})),r.a.createElement("br",null),r.a.createElement("p",null,r.a.createElement("em",{className:"smallerText"},"Settings are automatically saved on your device")),r.a.createElement("p",{style:{marginTop:"20vh"}},"Follow ClassClock:"),r.a.createElement("ul",{className:"footer__social"},r.a.createElement("li",null,r.a.createElement(he,{destination:ie},r.a.createElement(fe.a,{icon:be.a}))),r.a.createElement("li",null,r.a.createElement(he,{destination:ce},r.a.createElement(fe.a,{icon:be.c}))),r.a.createElement("li",null,r.a.createElement(he,{destination:se},r.a.createElement(fe.a,{icon:be.b})))),r.a.createElement("p",{id:"credits"},"Created by: ",r.a.createElement("a",{href:"https://www.adriancedwards.com"},"Adrian Edwards")," ","and ",r.a.createElement("a",{href:"https://nbdeg.com/"},"Nick DeGroot"),r.a.createElement("br",null),"Idea by: ",r.a.createElement("a",{href:"https://twitter.com/MrKumprey"},"Dan Kumprey")))})),we=function(e){var t=e.component,n=e.path,o=(Object(q.a)(e,["component","path"]),ne()),i=o.isAuthenticated,c=o.loginWithRedirect;Object(a.useEffect)((function(){(function(){var e=Object(K.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=3;break}return e.next=3,c({appState:{targetUrl:n}});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[i,c,n]);return r.a.createElement((function(e){return!0===i?r.a.createElement(t,e):null}),null)},Te=(n(225),Object(G.b)((function(e){return{selectedSchool:e.selectedSchool}}))((function(e){var t=Object(a.useState)([]),n=Object(V.a)(t,2),o=n[0],i=n[1],c=Object(a.useState)(0),l=Object(V.a)(c,2),u=l[0],d=l[1];Object(a.useEffect)((function(){var e=new AbortController,t=e.signal;0===o.length&&Math.abs((new Date).getTime()-u)>12e4&&function(){var e=Object(K.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Se.validateResponse(Se.getSchoolsList({signal:t})).then((function(e){i(e.data.map((function(e){return A.fromJson(C(e))}))),d((new Date).getTime())}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(t);return function(){e.abort()}}),[]);var h=o.map((function(t){return r.a.createElement("li",{key:t.getIdentifier(),onClick:function(){e.dispatch(je(t.getIdentifier())),e.dispatch(Object(s.b)(oe.main))}},r.a.createElement("span",{className:"schoolAcronym"},t.getAcronym()),r.a.createElement("br",null),r.a.createElement("span",{className:"schoolName"},t.getName()))}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Please select a school"),0===o.length?r.a.createElement("span",null,"Loading..."):r.a.createElement("ul",{className:"schoolSelectionList"},h),r.a.createElement("p",null,r.a.createElement("a",{href:"https://form.jotform.com/200374910475049"},"Nominate your School")))}))),De=n(36),Ne=(n(226),function(e){for(var t=Object(a.useState)(new Date),n=Object(V.a)(t,2),o=n[0],i=n[1],c={},s=0,l=Object.keys(e.options);s<l.length;s++){c[l[s]]=[]}var u=Object(a.useState)(c),d=Object(V.a)(u,2),h=d[0],m=d[1],f={weekStartsOn:1},p=F.a.startOfWeek(F.a.startOfMonth(o),f),g=F.a.endOfWeek(F.a.endOfMonth(o),f),v=function(e){var t=new Date(parseInt(e.currentTarget.dataset.date,10));if(y(t)){var n=b(t);O(t,n)}else console.log("invalid date")},b=function(t){var n=j(t),a=n?n[0]:void 0,r=Object.keys(e.options);return n?a&&a===r[r.length-1]?void 0:a?r[r.indexOf(a)+1]:void 0:r[0]},O=function(e,t){var n=j(e);if(n&&t){var a=Object(V.a)(n,2),r=a[0],o=a[1];if(r!==t){var i=h;i=S(i,r,o),i=E(i,t,e),m(i)}}else if(!n&&t)m(E(h,t,e));else if(n&&!t){var c=Object(V.a)(n,2),s=c[0],l=c[1];m(S(h,s,l))}},y=function(e){return e instanceof Date&&!isNaN(e.getTime())},E=function(e,t,n){var a={};return a[t]=[].concat(Object(De.a)(e[t]),[n.getTime()]),Object.assign({},e,a)},S=function(e,t,n){var a={};return a[t]=[].concat(Object(De.a)(e[t].slice(0,n)),Object(De.a)(e[t].slice(n+1))),Object.assign({},e,a)},j=function(e){for(var t in h)if(h.hasOwnProperty(t)){var n=h[t].indexOf(e.getTime());if(-1!==n)return[t,n]}};return r.a.createElement("table",{className:"calendarGrid"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:7},r.a.createElement(he,{destination:function(){return i(F.a.subMonths(o,1))},className:"smallIcon"},r.a.createElement(fe.a,{icon:pe.a})),r.a.createElement("span",{id:"monthDisplay"},F.a.format(o,"MMMM YYYY")),r.a.createElement(he,{destination:function(){return i(F.a.addMonths(o,1))},className:"smallIcon"},r.a.createElement(fe.a,{icon:pe.b})))),r.a.createElement("tr",null,function(){for(var e=[],t=0;t<7;t++)e.push(F.a.format(F.a.addDays(p,t),"ddd"));return e}().map((function(e,t){return r.a.createElement("td",{key:t},e)})))),r.a.createElement("tbody",null,function(){for(var t=[],n=[],a=0;a<=F.a.differenceInDays(g,p);a++){var i=F.a.addDays(p,a),c=F.a.startOfWeek(i,f),s=F.a.startOfWeek(F.a.addDays(i,1),f),l=j(i),u=l?l[0]:void 0,d=u?{backgroundColor:e.options[u].color}:void 0;n.push(r.a.createElement("td",{key:"date"+a},r.a.createElement("span",{onClick:function(e){return v(e)},className:F.a.getMonth(i)!==F.a.getMonth(o)?"disabled":void 0,"data-date":i.getTime(),style:d},i.getDate()))),F.a.isEqual(c,s)||(t.push(r.a.createElement("tr",{key:"weekBegin"+a},n)),n=[])}return t}()))}),Ce=Object(G.b)((function(e){var t=e.selectedSchool;return t.data=A.fromJson(t.data),{selectedSchool:t}}))((function(e){var t=ne(),n=(t.user,t.getTokenSilently,function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}),a=function(){var t=e.selectedSchool.data.getSchedules(),a={};if(void 0!==t){var r=!0,o=!1,i=void 0;try{for(var c,s=t[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var l=c.value;a[l.getIdentifier()]={color:n(),name:l.getName()}}}catch(u){o=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}return a}(),o=[];for(var i in a)a.hasOwnProperty(i)&&o.push(r.a.createElement("li",{style:{backgroundColor:a[i].color}},a[i].name));return r.a.createElement("div",null,r.a.createElement("h1",null,"Admin"),r.a.createElement(Ne,{options:a}),r.a.createElement("ul",{style:{listStyleType:"none",margin:0,padding:0}},o))})),Ie=[{path:oe.main,action:function(){return r.a.createElement(ge,null)}},{path:oe.fullSchedule,action:function(){return r.a.createElement(ve,null)}},{path:oe.settings,action:function(){return r.a.createElement(ke,null)}},{path:oe.selectSchool,action:function(){return r.a.createElement(Te,null)}},{path:oe.admin,action:function(){return r.a.createElement(we,{component:Ce,path:oe.admin})}},{path:oe.loginCallback,action:function(){return r.a.createElement("p",null,"Redirecting...")}}],_e=Object(s.a)(),xe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(c.c)({selectedSchool:O,userSettings:J,error:y,router:s.e}),a=Object(u.b)(W,n),r=Object(c.d)(a,t,Object(c.a)(f.a,Object(s.d)(e),l.a)),o=Object(u.c)(r);return{store:r,persistor:o}}(_e);Object(s.f)(_e,xe.store);var Me=new B.a(Ie),Re=function(e){window.location.hash=window.location.hash,xe.store.dispatch(Object(s.c)(e&&e.targetUrl?e.targetUrl:window.location.pathname))};function Fe(e){Me.resolve(e).then((function(e){i.a.render(r.a.createElement(G.a,{store:xe.store},r.a.createElement(z.a,{loading:null,persistor:xe.persistor},r.a.createElement(ae,{domain:re.domain,client_id:re.clientId,audience:re.audience,redirect_uri:oe.loginCallback,onRedirectCallback:Re},e))),document.getElementById("root"))}))}var Pe=xe.store.getState().router.pathname;xe.store.subscribe((function(){var e=Pe;e!==(Pe=xe.store.getState().router.pathname)&&(console.log("Some deep nested property changed from",e,"to",Pe),Fe(Pe))}));Fe(Pe),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},24:function(e,t,n){},99:function(e,t,n){e.exports=n(227)}},[[99,1,2]]]);
//# sourceMappingURL=main.a24e0729.chunk.js.map